<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xiaoyuan.mapper.PermissionMapper" >
	<resultMap id="BaseResultMap" type="com.xiaoyuan.model.permission.Permission" >
		<id column="id" property="id"/>
		<result column="permission" property="permission"/>
		<result column="parent_id" property="parentId"/>
		<result column="type" property="type"/>
		<result column="createtime" property="createtime"/>
		<result column="updatetime" property="updatetime"/>
		<result column="create_id" property="createId"/>
		<result column="update_id" property="updateId"/>
		<result column="describe" property="describe"/>
		<result column="url" property="url"/>
		<result column="params" property="params"/>
		<result column="title" property="title"/>
		<result column="description" property="description"/>
		<result column="is_show" property="isShow" />
	</resultMap>
	<resultMap id="PermissionResultMap" extends="BaseResultMap" type="com.xiaoyuan.model.dto.PermissionDto">
		<collection property="permissions" ofType="com.xiaoyuan.model.dto.PermissionDto" column="id" select="findPermissionByPId"/>
	</resultMap>
	<resultMap id="PermissionDtoResultMap" extends="BaseResultMap" type="com.xiaoyuan.model.dto.PermissionDto">
		<association property="ids" column="ids" />
	</resultMap>

	<insert id="insertService">
		INSERT INTO tl_permission
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="permission != null">
				permission ,
			</if>
			<if test="parentId != null">
				parentId,
			</if>
			<if test="type != null">
				type,
			</if>
			<if test="createtime != null">
				createtime,
			</if>
			<if test="updatetime != null">
				updatetime,
			</if>
			<if test="createId != null">
				create_id,
			</if>
			<if test="updateId != null">
				update_id,
			</if>
			<if test="describe != null">
				describe,
			</if>
			<if test="url != null">
				url,
			</if>
			<if test="params != null">
				params,
			</if>
			<if test="title != null">
				title,
			</if>
			<if test="isShow != null">
				is_show,
			</if>
			<if test="description != null">
				description,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="permission != null">
				#{permission},
			</if>
			<if test="parentId != null">
				#{parentId},
			</if>
			<if test="type != null">
				#{type},
			</if>
			<if test="createtime != null">
				#{createtime},
			</if>
			<if test="updatetime != null">
				#{updatetime},
			</if>
			<if test="createId != null">
				#{createId},
			</if>
			<if test="updateId != null">
				#{updateId},
			</if>
			<if test="describe != null">
				#{describe},
			</if>
			<if test="url != null">
				#{url},
			</if>
			<if test="params != null">
				#{params},
			</if>
			<if test="title != null">
				#{title},
			</if>
			<if test="isShow != null">
				#{isShow},
			</if>
			<if test="description != null">
				#{description},
			</if>
		</trim>
	</insert>
	<update id="updateService">
		update tl_permission
		<set>
			<if test="permission != null">
				permission = #{permission},
			</if>
			<if test="parentId != null">
				parent_id= #{parentId},
			</if>
			<if test="type != null">
				type =  #{type},
			</if>
			<if test="createtime != null">
				createtime = #{createtime},
			</if>
			<if test="updatetime != null">
				updatetime = #{updatetime},
			</if>
			<if test="createId != null">
				create_id=  #{createId},
			</if>
			<if test="updateId != null">
				update_id = #{updateId},
			</if>
			<if test="describe != null">
				describe = #{describe},
			</if>
			<if test="url != null">
				url= #{url},
			</if>
			<if test="params != null">
				params=  #{params},
			</if>
			<if test="title != null">
				title=   #{title},
			</if>
			<if test="isShow != null">
				is_show=   #{isShow},
			</if>
			<if test="description != null">
				description=   #{description},
			</if>

		</set>
		WHERE id = #{id}
	</update>
	<select id="list" resultMap="BaseResultMap" >
		SELECT * from tl_permission
	</select>


</mapper>