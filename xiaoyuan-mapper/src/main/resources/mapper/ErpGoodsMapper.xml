<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xiaoyuan.mapper.ErpGoodsMapper">


    <!-- 查找的数据，，，不行 -->
    <select id="goodsName" resultType="com.xiaoyuan.model.ErpGoods">
        SELECT * FROM tl_erp_goods where 1=1
        <if test="goods_cate != null">
            and goods_cate=#{goods_cate}
        </if>
    </select>


    <select id="searchGoodsMessageByGoodsName" resultType="com.xiaoyuan.model.ErpGoods">
        SELECT goods_sn,goods_spec FROM tl_erp_goods g
        WHERE 1=1
        <if test="goods_name !=null and goods_name !=''">
            AND g.goods_name=#{goods_name}
        </if>
    </select>

    <!-- 提货物料管理，传参为1 -->
    <!--SELECT
    id,
        goods_name,
        goods_sn,
        goods_spec,
        goods_man,
        status_,
        createtime,
        updatetime-->
    <select id="lists" resultType="com.xiaoyuan.model.ErpGoods">
        SELECT
        *
        FROM
        tl_erp_goods
        WHERE 1 = 1
        <if test="goods_cate != null">
            AND goods_cate = #{goods_cate}
        </if>
        <if test="status_ != null">
                AND status_ = #{status_}
        </if>
        order by updatetime desc
    </select>

    <select id="get" resultType="com.xiaoyuan.model.ErpGoods">
		select * from tl_erp_goods
		where id =
		#{id}
	</select>


    <insert id="insert">
		insert into
		tl_erp_goods(user_id,id,unit,goods_name,goods_sn,goods_spec,goods_man,goods_cate,createtime,updatetime,status_)
		values
		(#{user_id},#{id},#{unit},#{goods_name},#{goods_sn},#{goods_spec},#{goods_man},#{goods_cate},#{createtime},#{updatetime},0)
	</insert>

    <insert id="insertService">
        insert into
        tl_erp_goods
        <trim prefix="(" suffixOverrides="," suffix=")">
            <if test="goods_sn != null">
                goods_sn,
            </if>
            <if test="goods_man != null">
                goods_man,
            </if>
            <if test="goods_cate != null">
                goods_cate,
            </if>
            <if test="goods_spec != null">
                goods_spec,
            </if>
            <if test="goods_name != null">
                goods_name,
            </if>
            <if test="unit != null">
                unit,
            </if>
            <if test="status_ != null">
                status_,
            </if>
            <if test="createtime != null">
                createtime,
            </if>
            <if test="updatetime != null">
                updatetime,
            </if>
            <if test="user_id != null">
                user_id,
            </if>
            <if test="goods_type != null">
                goods_type,
            </if>
            <if test="goods_price != null">
                goods_price,
            </if>
            <if test="supplier_name != null">
                supplier_name,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="goods_sn != null">
                #{goods_sn},
            </if>
            <if test="goods_man != null">
                #{goods_man},
            </if>
            <if test="goods_cate != null">
                #{goods_cate},
            </if>
            <if test="goods_spec != null">
                #{goods_spec},
            </if>
            <if test="goods_name != null">
                #{goods_name},
            </if>
            <if test="unit != null">
                #{unit},
            </if>
            <if test="status_ != null">
                #{status_},
            </if>
            <if test="createtime != null">
                #{createtime},
            </if>
            <if test="updatetime != null">
                #{updatetime},
            </if>
            <if test="user_id != null">
                #{user_id},
            </if>
            <if test="goods_type != null">
                #{goods_type},
            </if>
            <if test="goods_price != null">
                #{goods_price},
            </if>
            <if test="supplier_name != null">
                #{supplier_name},
            </if>
        </trim>

    </insert>



    <select id="findPickGoods" resultType="com.xiaoyuan.model.ErpGoods">
        SELECT * FROM tl_erp_goods WHERE goods_type = true
    </select>
    <select id="resultList" resultType="com.xiaoyuan.model.ErpGoods">
        SELECT * FROM tl_erp_goods WHERE goods_type = false or goods_type is null
    </select>
    <select id="selectBySearch" resultType="com.xiaoyuan.model.ErpGoods">
        SELECT * FROM tl_erp_goods
        WHERE 1 = 1
        <if test="cateId != null">
            <if test="cateId == 2">
                and goods_type = false or goods_type is null
            </if>
            <if test="cateId == 1">
                and goods_type = true
            </if>
        </if>
        <if test="goods_sn != null and goods_sn != ''">
            and goods_sn = #{goods_sn}
        </if>
        <if test="old_goods_sn != null and old_goods_sn != ''">
            and goods_sn != #{old_goods_sn}
        </if>
        <if test="goodsId!= null">
            and id = #{goodsId}
        </if>
    </select>
    <select id="countBySearch" resultType="java.lang.Integer">
        SELECT count(id) FROM tl_erp_goods
        WHERE 1 = 1
        <if test="cateId != null">
            <if test="cateId == 2">
                and goods_type = false or goods_type is null
            </if>
            <if test="cateId == 1">
                and goods_type = true
            </if>
        </if>
        <if test="goods_sn != null and goods_sn != ''">
            and goods_sn = #{goods_sn}
        </if>
        <if test="old_goods_sn != null and old_goods_sn != ''">
            and goods_sn != #{old_goods_sn}
        </if>
        <if test="goodsId!= null">
            and id = #{goodsId}
        </if>
    </select>
</mapper>