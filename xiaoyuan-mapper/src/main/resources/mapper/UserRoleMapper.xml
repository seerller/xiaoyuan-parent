<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xiaoyuan.mapper.UserRoleMapper">
	<select id="role_auth_ids" resultType="com.xiaoyuan.model.UserRole">
		SELECT distinct c.`role_auth_ids` FROM tl_user_child_role
		c,tl_erp_user u WHERE c.`seller_id` = u.`role_id`

		<if test="seller_id != null">
			and c.seller_id = #{seller_id}
		</if>
	</select>

	<select id="role" resultType="com.xiaoyuan.model.UserRole">
		SELECT
		role_name,seller_id,role_auth_ids from tl_user_child_role WHERE
		role_id = #{role_id}
	</select>

	<select id="role_auth_id" resultType="com.xiaoyuan.model.UserRole">
		select role_auth_ids from
		tl_user_child_role where seller_id =#{seller_id} group by seller_id
	</select>

	<!-- YZH 这里返回类型从Integer改为UserRole -->
	<select id="userroles" resultType="com.xiaoyuan.model.UserRole">
		SELECT
		c.*
		FROM
		tl_user_child_role c
	</select>

	<update id="update">
		update tl_user_child_role
		<set>
			role_auth_ids=#{role_auth_ids}
		</set>
		where role_name=#{role_name}
	</update>

	<insert id="add" useGeneratedKeys="true" keyProperty="id">
		insert into
		tl_user_child_role(role_name,role_auth_ids) values
		(#{role_name},#{role_auth_ids})
	</insert>
</mapper>